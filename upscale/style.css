:root { --red: #ef4444; --green: #22c55e; --orange: #f59e0b; --primary: #6366f1; --primary-hover: #4f46e5; --bg-body: #f8fafc; --bg-card: #ffffff; --text-main: #1e293b; --text-muted: #64748b; --border: #e2e8f0; }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-body); color: var(--text-main); min-height: 100vh; }
.bg-header { position: fixed; top: 0; left: 0; right: 0; height: 320px; background: linear-gradient(135deg, #6366f1, #a855f7); z-index: 0; }
.wrap { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
.hero { text-align: center; padding: 20px 0 40px; color: #fff; }
.hero h1 { font-size: 2.4rem; font-weight: 900; letter-spacing: -.02em; }
.hero p { opacity: .85; margin-top: 8px; }
.main-tabs-wrapper { display: flex; justify-content: center; margin-bottom: 30px; position: relative; z-index: 10; }
.main-tabs { background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(12px); padding: 6px; border-radius: 50px; display: inline-flex; gap: 8px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); border: 1px solid rgba(255, 255, 255, 0.2); }
.main-tab-btn { padding: 12px 28px; border-radius: 40px; border: none; background: transparent; color: rgba(255, 255, 255, 0.8); font-weight: 800; font-size: 1rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; align-items: center; gap: 8px; }
.main-tab-btn:hover { color: #fff; background: rgba(255, 255, 255, 0.1); }
.main-tab-btn.active { background: #fff; color: var(--primary); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
.upscale-card { background: #fff; border-radius: 32px; box-shadow: 0 20px 50px rgba(0, 0, 0, .08); padding: 32px; margin-bottom: 40px; display: grid; grid-template-columns: 320px 1fr; gap: 24px; }
.main-card { background: #fff; border-radius: 32px; box-shadow: 0 20px 50px rgba(0, 0, 0, .08); padding: 32px; margin-bottom: 40px; }
#upload { display: none; }
.upload-label { display: block; border: 2px dashed #cbd5e1; border-radius: 24px; padding: 40px 24px; text-align: center; cursor: pointer; transition: all .3s; background: #f1f5f9; margin-bottom: 24px; }
.upload-label:hover { border-color: var(--primary); background: #eef2ff; }
.upload-label.has-file { padding: 16px; border-style: solid; cursor: default; background: #fff; }
.upload-icon { font-size: 40px; color: var(--primary); margin-bottom: 10px; }
.file-row { display: none; align-items: center; gap: 20px; text-align: left; }
.file-row.show { display: flex; }
.file-thumb { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; }
.editor-layout { display: none; gap: 24px; margin-top: 24px; }
.editor-layout.show { display: grid; grid-template-columns: 1fr 300px; }
.work-area { position: relative; background: #f8fafc; border-radius: 24px; border: 2px solid #f1f5f9; overflow: hidden; }
.canvas-container { position: relative; width: 100%; height: 560px; background-image: conic-gradient(#f1f5f9 25%, white 0 50%, #f1f5f9 0 75%, white 0); background-size: 20px 20px; cursor: crosshair; overflow: hidden; }
#compareWrapper { position: absolute; top: 0; left: 0; display: inline-block; line-height: 0; will-change: transform; opacity: 0; transition: opacity .3s; transform-origin: 0 0; }
#compareWrapper.ready { opacity: 1; }
#originalOverlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 10; pointer-events: none; clip-path: inset(0 100% 0 0); }
.compare-bar { position: absolute; top: 0; bottom: 0; width: 2px; background: #fff; left: 0; z-index: 15; pointer-events: none; display: none; box-shadow: 0 0 8px rgba(0, 0, 0, .3); }
canvas { display: block; position: relative; z-index: 5; }
.badge-ui { position: absolute; top: 16px; background: rgba(0, 0, 0, .6); color: #fff; padding: 6px 14px; border-radius: 50px; font-size: .75rem; z-index: 20; pointer-events: none; backdrop-filter: blur(4px); display: flex; align-items: center; gap: 8px; }
#compBadge { left: 16px; }
#zoomBadge { right: 16px; }
.zoom-controls { position: absolute; top: 60px; left: 16px; display: flex; flex-direction: column; gap: 6px; z-index: 30; }
.zoom-btn { width: 40px; height: 40px; border-radius: 10px; border: 1px solid rgba(0, 0, 0, .1); background: rgba(255, 255, 255, .95); color: #475569; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1rem; transition: all .2s; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, .1); outline: none; }
.zoom-btn:hover { background: #fff; color: var(--primary); transform: translateY(-1px); }
.zoom-btn.active { background: var(--primary); color: #fff; border-color: var(--primary); }
.tool-panel { background: #fffbeb; border: 2px solid #fef3c7; border-radius: 24px; padding: 24px; height: fit-content; }
.sec-header { font-weight: 900; color: #92400e; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }
.fill-dir-btns { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
.fill-dir-btn { padding: 14px; border-radius: 14px; border: 2px solid #e2e8f0; background: #fff; cursor: pointer; font-weight: 700; transition: .2s; display: flex; align-items: center; gap: 10px; outline: none; }
.fill-dir-btn.on { border-color: var(--red); color: var(--red); background: #fef2f2; }
.fill-dir-btn.restore-on { border-color: var(--green); color: var(--green); background: #ecfdf5; }
.slider-group { margin-bottom: 20px; }
.slider-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: .9rem; font-weight: 700; color: #92400e; }
.fill-slider { width: 100%; height: 8px; appearance: none; background: #e2e8f0; border-radius: 10px; }
.fill-slider::-webkit-slider-thumb { appearance: none; width: 22px; height: 22px; background: var(--orange); border-radius: 50%; cursor: pointer; border: 3px solid #fff; }
.bg-mini-wrap { display: flex; align-items: center; gap: 10px; margin-bottom: 24px; padding: 8px 12px; background: #fff; border: 2px solid #e2e8f0; border-radius: 16px; }
#bgColorInput { width: 28px; height: 28px; border: none; border-radius: 6px; cursor: pointer; background: none; }
.bg-mini-label { font-size: .85rem; font-weight: 700; color: #475569; flex: 1; }
.btn-mini-trans { font-size: .75rem; color: var(--primary); background: none; border: none; cursor: pointer; text-decoration: underline; font-weight: 600; }
.action-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.btn { padding: 14px 24px; border-radius: 16px; border: none; font-weight: 800; cursor: pointer; transition: all .2s; display: inline-flex; align-items: center; justify-content: center; gap: 8px; outline: none; }
.btn-primary { background: var(--primary); color: #fff; width: 100%; margin-bottom: 10px; }
.btn-success { background: var(--green); color: #fff; width: 100%; }
.btn-outline { background: #fff; border: 2px solid #e2e8f0; color: #475569; }
.btn:disabled { opacity: .5; filter: grayscale(1); cursor: not-allowed; }
.toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); padding: 16px 32px; background: #10b981; color: #fff; border-radius: 50px; font-weight: 700; transition: .4s; z-index: 9999; }
.toast.show { transform: translateX(-50%) translateY(0); }
.fill-cursor { position: fixed; pointer-events: none; z-index: 10000; display: none; }
.fill-cursor-ring { border: 2px solid var(--red); border-radius: 50%; transition: width .1s, height .1s; }
.fill-cursor-ring.restore { border-color: var(--green); }
.tab-bar { display: flex; background: #f1f5f9; border-radius: 14px; padding: 4px; margin-bottom: 20px; gap: 4px; }
.tab-btn { flex: 1; padding: 9px 4px; border-radius: 10px; border: none; background: transparent; cursor: pointer; font-weight: 700; font-size: .8rem; color: #64748b; transition: .2s; outline: none; }
.tab-btn.active { background: #fff; color: var(--primary); box-shadow: 0 2px 8px rgba(0, 0, 0, .08); }
.tab-content { display: none; }
.tab-content.show { display: block; }
.sub-panel { background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 16px; padding: 14px; margin-bottom: 14px; }
.brush-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.brush-row label { font-size: .78rem; color: #64748b; font-weight: 600; min-width: 40px; }
.brush-slider { flex: 1; height: 6px; appearance: none; background: #e2e8f0; border-radius: 10px; }
.brush-slider::-webkit-slider-thumb { appearance: none; width: 16px; height: 16px; background: var(--primary); border-radius: 50%; cursor: pointer; border: 2px solid #fff; }
.brush-val { font-size: .78rem; font-weight: 700; color: var(--primary); min-width: 28px; text-align: right; }
.tip-text { font-size: .73rem; color: #94a3b8; line-height: 1.5; margin-bottom: 14px; }
@media(max-width: 850px) { .editor-layout.show { grid-template-columns: 1fr; } .upscale-card { grid-template-columns: 1fr; } }